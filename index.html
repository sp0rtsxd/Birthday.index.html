<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy 21st Birthday Visal! üéÇ</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;600;800&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }
  
  body {
    overflow: hidden;
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
    min-height: 100vh;
    color: white;
  }

  /* STARFIELD BACKGROUND */
  .stars {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 0;
  }
  .star {
    position: absolute;
    width: 3px;
    height: 3px;
    background: white;
    border-radius: 50%;
    animation: twinkle 2s infinite ease-in-out;
  }
  @keyframes twinkle {
    0%, 100% { opacity: 0.3; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.5); }
  }

  /* AURORA BACKGROUND */
  .aurora {
    position: fixed;
    inset: 0;
    background: 
      radial-gradient(ellipse at 20% 20%, rgba(255, 107, 157, 0.15) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 80%, rgba(107, 185, 255, 0.15) 0%, transparent 50%),
      radial-gradient(ellipse at 50% 50%, rgba(255, 215, 107, 0.1) 0%, transparent 50%);
    animation: aurora 15s ease-in-out infinite;
    z-index: 0;
  }
  @keyframes aurora {
    0%, 100% { filter: hue-rotate(0deg); }
    50% { filter: hue-rotate(30deg); }
  }

  /* START SCREEN */
  .start-screen {
    position: fixed;
    inset: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
    z-index: 1000;
    transition: opacity 1s, transform 1s;
  }
  .start-screen.hidden {
    opacity: 0;
    transform: scale(1.5);
    pointer-events: none;
  }
  .start-title {
    font-family: 'Pacifico', cursive;
    font-size: 42px;
    background: linear-gradient(45deg, #ff6b9d, #ffd93d, #6bcfff, #ff6b9d);
    background-size: 300% 300%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: gradientFlow 3s ease infinite;
    margin-bottom: 40px;
    text-shadow: 0 0 30px rgba(255,107,157,0.5);
  }
  @keyframes gradientFlow {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  .gift-box {
    width: 120px;
    height: 120px;
    position: relative;
    cursor: pointer;
    animation: float 3s ease-in-out infinite;
    transition: transform 0.3s;
  }
  .gift-box:hover { transform: scale(1.1) rotate(5deg); }
  .gift-box:active { transform: scale(0.95); }
  
  .gift-body {
    width: 100%;
    height: 80px;
    background: linear-gradient(135deg, #ff6b9d, #ff8fab);
    border-radius: 10px;
    position: absolute;
    bottom: 0;
    box-shadow: 0 10px 30px rgba(255,107,157,0.5);
  }
  .gift-ribbon-v {
    width: 20px;
    height: 100%;
    background: linear-gradient(90deg, #ffd93d, #ffec8b);
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    border-radius: 2px;
  }
  .gift-ribbon-h {
    width: 100%;
    height: 20px;
    background: linear-gradient(180deg, #ffd93d, #ffec8b);
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    border-radius: 2px;
  }
  .gift-lid {
    width: 110px;
    height: 25px;
    background: linear-gradient(135deg, #ff8fab, #ffb3c6);
    border-radius: 8px;
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    box-shadow: 0 5px 15px rgba(255,107,157,0.3);
    transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }
  .gift-box:hover .gift-lid {
    transform: translateX(-50%) translateY(-20px) rotate(-15deg);
  }
  .gift-bow {
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 40px;
    filter: drop-shadow(0 5px 10px rgba(255,215,61,0.5));
  }
  .start-hint {
    margin-top: 30px;
    font-size: 16px;
    opacity: 0.7;
    animation: pulse 2s infinite;
  }
  @keyframes pulse {
    0%, 100% { opacity: 0.5; }
    50% { opacity: 1; }
  }

  /* MAIN CONTENT */
  .main-content {
    position: relative;
    z-index: 10;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    padding: 20px;
    opacity: 0;
    transition: opacity 1s 0.5s;
  }
  .main-content.visible { opacity: 1; }

  /* AGE REVEAL */
  .age-container {
    position: relative;
    margin-bottom: 20px;
  }
  .age {
    font-size: clamp(100px, 25vw, 200px);
    font-weight: 900;
    background: linear-gradient(45deg, #ff6b9d, #ffd93d, #6bcfff, #c86bff, #ff6b9d);
    background-size: 400% 400%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: gradientFlow 4s ease infinite, ageReveal 1s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
    text-shadow: 0 0 80px rgba(255,107,157,0.8);
    position: relative;
  }
  @keyframes ageReveal {
    0% { transform: scale(0) rotate(-180deg); opacity: 0; }
    100% { transform: scale(1) rotate(0deg); opacity: 1; }
  }
  .age-sparkle {
    position: absolute;
    font-size: 30px;
    animation: sparkleFloat 2s ease-in-out infinite;
  }
  @keyframes sparkleFloat {
    0%, 100% { transform: translateY(0) scale(1); opacity: 1; }
    50% { transform: translateY(-10px) scale(1.2); opacity: 0.7; }
  }

  /* SUBTITLE */
  .subtitle {
    font-family: 'Pacifico', cursive;
    font-size: clamp(24px, 5vw, 42px);
    margin-bottom: 50px;
    opacity: 0;
    animation: slideUp 1s 0.5s forwards;
    text-shadow: 0 0 20px rgba(255,255,255,0.5);
  }
  @keyframes slideUp {
    0% { transform: translateY(30px); opacity: 0; }
    100% { transform: translateY(0); opacity: 1; }
  }

  /* 3D CAKE */
  .cake-scene {
    perspective: 1000px;
    margin-bottom: 40px;
  }
  .cake-container {
    position: relative;
    width: 280px;
    height: 220px;
    transform-style: preserve-3d;
    animation: cakeFloat 4s ease-in-out infinite;
  }
  @keyframes cakeFloat {
    0%, 100% { transform: translateY(0) rotateY(0deg); }
    25% { transform: translateY(-10px) rotateY(5deg); }
    75% { transform: translateY(-10px) rotateY(-5deg); }
  }
  .cake-plate {
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 260px;
    height: 20px;
    background: linear-gradient(135deg, #ffd93d, #ffec8b);
    border-radius: 50%;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
  }
  .cake-layer {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    border-radius: 20px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.2);
  }
  .cake-layer-1 {
    bottom: 15px;
    width: 200px;
    height: 70px;
    background: linear-gradient(135deg, #ff8fab, #ffb3c6);
  }
  .cake-layer-2 {
    bottom: 80px;
    width: 160px;
    height: 55px;
    background: linear-gradient(135deg, #c9f4aa, #a8e6cf);
  }
  .cake-layer-3 {
    bottom: 130px;
    width: 120px;
    height: 45px;
    background: linear-gradient(135deg, #a8d8ff, #88c4f4);
  }
  .cake-frosting {
    position: absolute;
    width: 100%;
    height: 15px;
    top: -8px;
    background: linear-gradient(90deg, 
      transparent 0%, #fff 5%, #fff 15%, transparent 20%,
      transparent 30%, #fff 35%, #fff 45%, transparent 50%,
      transparent 60%, #fff 65%, #fff 75%, transparent 80%,
      transparent 90%, #fff 95%);
    border-radius: 50%;
  }
  .cake-decoration {
    position: absolute;
    font-size: 20px;
  }

  /* CANDLES */
  .candles-container {
    position: absolute;
    bottom: 175px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 15px;
  }
  .candle {
    position: relative;
    width: 12px;
    height: 45px;
    background: linear-gradient(90deg, #fff, #ffd93d, #fff);
    border-radius: 6px 6px 3px 3px;
    box-shadow: 0 2px 10px rgba(255,217,61,0.5);
  }
  .candle::before {
    content: '';
    position: absolute;
    top: -5px;
    left: 50%;
    transform: translateX(-50%);
    width: 3px;
    height: 8px;
    background: #333;
    border-radius: 1px;
  }
  .flame {
    position: absolute;
    top: -28px;
    left: 50%;
    transform: translateX(-50%);
    width: 14px;
    height: 25px;
    background: radial-gradient(ellipse at bottom, #ffd93d 0%, #ff6b35 50%, transparent 100%);
    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    animation: flicker 0.3s infinite alternate;
    box-shadow: 0 0 20px #ffd93d, 0 0 40px #ff6b35;
    transition: opacity 0.5s, transform 0.5s;
  }
  .flame.blown {
    opacity: 0;
    transform: translateX(-50%) translateY(-20px) scale(0);
  }
  @keyframes flicker {
    0% { transform: translateX(-50%) scale(1) rotate(-2deg); }
    100% { transform: translateX(-50%) scale(1.1) rotate(2deg); }
  }
  .flame-glow {
    position: absolute;
    top: -35px;
    left: 50%;
    transform: translateX(-50%);
    width: 40px;
    height: 40px;
    background: radial-gradient(circle, rgba(255,217,61,0.4) 0%, transparent 70%);
    animation: glowPulse 1s infinite;
    transition: opacity 0.5s;
  }
  .flame-glow.blown { opacity: 0; }
  @keyframes glowPulse {
    0%, 100% { transform: translateX(-50%) scale(1); opacity: 0.5; }
    50% { transform: translateX(-50%) scale(1.3); opacity: 0.8; }
  }

  /* BLOW INSTRUCTION */
  .blow-instruction {
    position: absolute;
    bottom: 240px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(255,255,255,0.15);
    backdrop-filter: blur(10px);
    padding: 10px 20px;
    border-radius: 30px;
    font-size: 14px;
    white-space: nowrap;
    animation: bounce 2s infinite;
    cursor: pointer;
    border: 1px solid rgba(255,255,255,0.3);
    transition: all 0.3s;
  }
  .blow-instruction:hover {
    background: rgba(255,255,255,0.25);
    transform: translateX(-50%) scale(1.05);
  }
  .blow-instruction.hidden { display: none; }
  @keyframes bounce {
    0%, 100% { transform: translateX(-50%) translateY(0); }
    50% { transform: translateX(-50%) translateY(-5px); }
  }

  /* WISH REVEALED */
  .wish-container {
    position: absolute;
    bottom: 240px;
    left: 50%;
    transform: translateX(-50%);
    opacity: 0;
    transition: opacity 1s;
    text-align: center;
  }
  .wish-container.visible { opacity: 1; }
  .wish-text {
    font-family: 'Pacifico', cursive;
    font-size: 24px;
    background: linear-gradient(45deg, #ffd93d, #ff6b9d);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: wishGlow 2s infinite;
  }
  @keyframes wishGlow {
    0%, 100% { filter: drop-shadow(0 0 10px rgba(255,107,157,0.5)); }
    50% { filter: drop-shadow(0 0 20px rgba(255,107,157,0.8)); }
  }

  /* ENVELOPE */
  .envelope-container {
    margin-top: 30px;
    position: relative;
  }
  .envelope {
    width: 100px;
    height: 70px;
    position: relative;
    cursor: pointer;
    transition: transform 0.3s;
    animation: envelopeFloat 3s ease-in-out infinite;
  }
  .envelope:hover { transform: scale(1.1); }
  @keyframes envelopeFloat {
    0%, 100% { transform: translateY(0) rotate(-2deg); }
    50% { transform: translateY(-5px) rotate(2deg); }
  }
  .envelope-body {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #ffb3c6, #ff8fab);
    border-radius: 5px;
    box-shadow: 0 10px 30px rgba(255,107,157,0.4);
  }
  .envelope-flap {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    border-left: 50px solid transparent;
    border-right: 50px solid transparent;
    border-top: 40px solid #ff6b9d;
    transform-origin: top;
    transition: transform 0.5s;
  }
  .envelope:hover .envelope-flap {
    transform: rotateX(180deg);
  }
  .envelope-heart {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 28px;
    filter: drop-shadow(0 2px 5px rgba(0,0,0,0.2));
  }
  .envelope-hint {
    margin-top: 15px;
    font-size: 14px;
    opacity: 0.7;
    animation: pulse 2s infinite;
  }

  /* MESSAGE MODAL */
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    backdrop-filter: blur(10px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 100;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.5s;
  }
  .modal-overlay.visible {
    opacity: 1;
    pointer-events: auto;
  }
  .modal-card {
    background: linear-gradient(135deg, #1a1a2e, #16213e);
    border: 2px solid rgba(255,107,157,0.3);
    border-radius: 30px;
    padding: 40px;
    max-width: 400px;
    width: 90%;
    text-align: center;
    transform: scale(0.8) translateY(50px);
    transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    box-shadow: 
      0 20px 60px rgba(255,107,157,0.3),
      inset 0 1px 0 rgba(255,255,255,0.1);
  }
  .modal-overlay.visible .modal-card {
    transform: scale(1) translateY(0);
  }
  .modal-header {
    font-family: 'Pacifico', cursive;
    font-size: 28px;
    margin-bottom: 25px;
    background: linear-gradient(45deg, #ff6b9d, #ffd93d);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  .modal-message {
    font-size: 16px;
    line-height: 1.8;
    color: rgba(255,255,255,0.9);
  }
  .modal-message .typewriter {
    display: inline;
  }
  .modal-emoji {
    font-size: 50px;
    margin: 20px 0;
    animation: emojiDance 1s infinite;
  }
  @keyframes emojiDance {
    0%, 100% { transform: rotate(-10deg); }
    50% { transform: rotate(10deg); }
  }
  .modal-close {
    margin-top: 25px;
    padding: 12px 35px;
    background: linear-gradient(135deg, #ff6b9d, #ff8fab);
    border: none;
    border-radius: 30px;
    color: white;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 0 5px 20px rgba(255,107,157,0.4);
  }
  .modal-close:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(255,107,157,0.6);
  }

  /* FLOATING BALLOONS */
  .balloon {
    position: fixed;
    bottom: -150px;
    font-size: 60px;
    cursor: pointer;
    animation: floatUp linear forwards;
    transition: transform 0.2s;
    z-index: 5;
    filter: drop-shadow(0 10px 20px rgba(0,0,0,0.3));
  }
  .balloon:hover { transform: scale(1.2); }
  .balloon.popped {
    animation: pop 0.3s forwards !important;
  }
  @keyframes floatUp {
    0% { transform: translateY(0) rotate(0deg); }
    100% { transform: translateY(-120vh) rotate(20deg); }
  }
  @keyframes pop {
    0% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.5); opacity: 0.5; }
    100% { transform: scale(0); opacity: 0; }
  }

  /* CONFETTI */
  .confetti {
    position: fixed;
    width: 12px;
    height: 12px;
    top: -20px;
    animation: confettiFall linear forwards;
    z-index: 50;
  }
  @keyframes confettiFall {
    0% { transform: translateY(0) rotate(0deg); opacity: 1; }
    100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
  }

  /* FIREWORKS */
  .firework {
    position: fixed;
    width: 5px;
    height: 5px;
    border-radius: 50%;
    animation: explode 1s forwards;
    z-index: 40;
  }
  @keyframes explode {
    0% { transform: scale(1); opacity: 1; }
    100% { transform: scale(0); opacity: 0; }
  }

  /* SPARKLE CURSOR */
  .sparkle-trail {
    position: fixed;
    pointer-events: none;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: radial-gradient(circle, #ffd93d, transparent);
    animation: sparkleTrailFade 1s forwards;
    z-index: 1000;
  }
  @keyframes sparkleTrailFade {
    0% { transform: scale(1); opacity: 1; }
    100% { transform: scale(0); opacity: 0; }
  }

  /* FLOATING ELEMENTS */
  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-15px); }
  }

  /* PHOTO FRAME */
  .photo-frame {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 80px;
    height: 80px;
    border: 4px solid rgba(255,255,255,0.3);
    border-radius: 50%;
    overflow: hidden;
    cursor: pointer;
    transition: all 0.3s;
    animation: photoGlow 3s infinite;
    z-index: 20;
  }
  .photo-frame:hover {
    transform: scale(1.2);
    border-color: #ff6b9d;
  }
  @keyframes photoGlow {
    0%, 100% { box-shadow: 0 0 20px rgba(255,107,157,0.3); }
    50% { box-shadow: 0 0 40px rgba(255,107,157,0.6); }
  }
  .photo-placeholder {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #ff6b9d, #6bcfff);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 30px;
  }

  /* MUSIC TOGGLE */
  .music-toggle {
    position: fixed;
    top: 20px;
    right: 20px;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: rgba(255,255,255,0.1);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    cursor: pointer;
    transition: all 0.3s;
    z-index: 100;
  }
  .music-toggle:hover {
    background: rgba(255,255,255,0.2);
    transform: scale(1.1);
  }
  .music-toggle.playing {
    animation: musicPulse 1s infinite;
  }
  @keyframes musicPulse {
    0%, 100% { box-shadow: 0 0 0 0 rgba(255,107,157,0.4); }
    50% { box-shadow: 0 0 0 15px rgba(255,107,157,0); }
  }

  /* HIDDEN AUDIO */
  audio { display: none; }

  /* RESPONSIVE */
  @media (max-width: 480px) {
    .cake-container { transform: scale(0.8); }
    .modal-card { padding: 25px; }
  }
</style>
</head>
<body>

<!-- STARFIELD -->
<div class="stars" id="stars"></div>

<!-- AURORA -->
<div class="aurora"></div>

<!-- START SCREEN -->
<div class="start-screen" id="startScreen">
  <div class="start-title">‚ú® A Special Day Awaits ‚ú®</div>
  <div class="gift-box" id="giftBox">
    <div class="gift-lid"></div>
    <div class="gift-body">
      <div class="gift-ribbon-v"></div>
      <div class="gift-ribbon-h"></div>
    </div>
    <div class="gift-bow">üéÄ</div>
  </div>
  <div class="start-hint">Tap the gift to open üéÅ</div>
</div>

<!-- MAIN CONTENT -->
<div class="main-content" id="mainContent">
  
  <!-- AGE -->
  <div class="age-container">
    <div class="age">21</div>
    <div class="age-sparkle" style="top: -10px; left: -20px; animation-delay: 0s;">‚ú®</div>
    <div class="age-sparkle" style="top: 0; right: -25px; animation-delay: 0.5s;">‚≠ê</div>
    <div class="age-sparkle" style="bottom: 10px; left: 0; animation-delay: 1s;">üí´</div>
    <div class="age-sparkle" style="bottom: 0; right: 0; animation-delay: 1.5s;">‚ú®</div>
  </div>

  <!-- SUBTITLE -->
  <div class="subtitle">Happy Birthday, Visal ü§ç</div>

  <!-- CAKE -->
  <div class="cake-scene">
    <div class="cake-container">
      <!-- Blow Instruction -->
      <div class="blow-instruction" id="blowInstruction" onclick="blowCandles()">
        üå¨Ô∏è Click to blow out the candles!
      </div>
      
      <!-- Wish Container -->
      <div class="wish-container" id="wishContainer">
        <div class="wish-text">‚ú® Make a wish! ‚ú®</div>
      </div>

      <!-- Candles -->
      <div class="candles-container">
        <div class="candle">
          <div class="flame" id="flame1"></div>
          <div class="flame-glow" id="glow1"></div>
        </div>
        <div class="candle">
          <div class="flame" id="flame2"></div>
          <div class="flame-glow" id="glow2"></div>
        </div>
        <div class="candle">
          <div class="flame" id="flame3"></div>
          <div class="flame-glow" id="glow3"></div>
        </div>
      </div>

      <!-- Cake Layers -->
      <div class="cake-layer cake-layer-3">
        <div class="cake-frosting"></div>
        <div class="cake-decoration" style="top: 15px; left: 15px;">üå∏</div>
        <div class="cake-decoration" style="top: 15px; right: 15px;">üå∏</div>
      </div>
      <div class="cake-layer cake-layer-2">
        <div class="cake-frosting"></div>
        <div class="cake-decoration" style="top: 20px; left: 20px;">‚≠ê</div>
        <div class="cake-decoration" style="top: 20px; right: 20px;">‚≠ê</div>
      </div>
      <div class="cake-layer cake-layer-1">
        <div class="cake-frosting"></div>
        <div class="cake-decoration" style="top: 25px; left: 25px;">ü§ç</div>
        <div class="cake-decoration" style="top: 25px; left: 50%; transform: translateX(-50%);">01/06</div>
        <div class="cake-decoration" style="top: 25px; right: 25px;">ü§ç</div>
      </div>
      <div class="cake-plate"></div>
    </div>
  </div>

  <!-- ENVELOPE -->
  <div class="envelope-container">
    <div class="envelope" onclick="openMessage()">
      <div class="envelope-body"></div>
      <div class="envelope-flap"></div>
      <div class="envelope-heart">üíå</div>
    </div>
    <div class="envelope-hint">Click for a special message ‚ú®</div>
  </div>
</div>

<!-- MESSAGE MODAL -->
<div class="modal-overlay" id="modalOverlay" onclick="closeMessage(event)">
  <div class="modal-card" onclick="event.stopPropagation()">
    <div class="modal-header">üíå To My Homie Visal</div>
    <div class="modal-emoji">üéÇ</div>
    <div class="modal-message">
      <span id="typewriterText"></span><span class="cursor">|</span>
    </div>
    <button class="modal-close" onclick="closeMessage(event)">Close with Love üíï</button>
  </div>
</div>

<!-- PHOTO FRAME -->
<div class="photo-frame" onclick="alert('Add your favorite photo here! üì∏')">
  <div class="photo-placeholder">üë§</div>
</div>

<!-- MUSIC TOGGLE -->
<div class="music-toggle" id="musicToggle" onclick="toggleMusic()">
  <span id="musicIcon">üîá</span>
</div>

<!-- AUDIO -->
<audio id="bgMusic" loop>
  <source src="https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3" type="audio/mpeg">
</audio>

<script>
  // ===== CONSTANTS =====
  const MESSAGE = `Happy 21st, homie ü§ç

Cheers to another year older, and so our friendship grows stronger.

May this year bring you endless love, countless blessings, amazing success, and beautiful growth.

Thanks for always having my back, buddy. You're one of a kind!

Here's to making more unforgettable memories together! üéÇüíô`;

  const BALLOONS = ['üéà', 'üéà', 'üéà', 'üéà', 'üéà'];
  const BALLOON_COLORS = ['#ff6b9d', '#ffd93d', '#6bcfff', '#c86bff', '#6bff9d'];
  const CONFETTI_COLORS = ['#ff6b9d', '#ffd93d', '#6bcfff', '#c86bff', '#6bff9d', '#ff8fab', '#a8e6cf'];

  // ===== STATE =====
  let musicPlaying = false;
  let candlesBlown = false;

  // ===== INIT =====
  document.addEventListener('DOMContentLoaded', () => {
    createStars();
    setupSparkleTrail();
  });

  // ===== STARS =====
  function createStars() {
    const starsContainer = document.getElementById('stars');
    for (let i = 0; i < 100; i++) {
      const star = document.createElement('div');
      star.className = 'star';
      star.style.left = Math.random() * 100 + 'vw';
      star.style.top = Math.random() * 100 + 'vh';
      star.style.animationDelay = Math.random() * 2 + 's';
      star.style.width = star.style.height = (1 + Math.random() * 3) + 'px';
      starsContainer.appendChild(star);
    }
  }

  // ===== SPARKLE TRAIL =====
  function setupSparkleTrail() {
    document.addEventListener('mousemove', (e) => {
      if (Math.random() > 0.85) {
        createSparkle(e.clientX, e.clientY);
      }
    });
  }

  function createSparkle(x, y) {
    const sparkle = document.createElement('div');
    sparkle.className = 'sparkle-trail';
    sparkle.style.left = x + 'px';
    sparkle.style.top = y + 'px';
    sparkle.style.background = `radial-gradient(circle, ${CONFETTI_COLORS[Math.floor(Math.random() * CONFETTI_COLORS.length)]}, transparent)`;
    document.body.appendChild(sparkle);
    setTimeout(() => sparkle.remove(), 1000);
  }

  // ===== START PAGE =====
  document.getElementById('giftBox').addEventListener('click', startPage);

  function startPage() {
    const startScreen = document.getElementById('startScreen');
    const mainContent = document.getElementById('mainContent');
    
    startScreen.classList.add('hidden');
    setTimeout(() => {
      mainContent.classList.add('visible');
      launchConfetti();
      startBalloons();
      launchFireworks();
    }, 500);
  }

  // ===== CONFETTI =====
  function launchConfetti() {
    for (let i = 0; i < 150; i++) {
      setTimeout(() => createConfetti(), i * 20);
    }
  }

  function createConfetti() {
    const confetti = document.createElement('div');
    confetti.className = 'confetti';
    confetti.style.left = Math.random() * 100 + 'vw';
    confetti.style.background = CONFETTI_COLORS[Math.floor(Math.random() * CONFETTI_COLORS.length)];
    confetti.style.width = (5 + Math.random() * 10) + 'px';
    confetti.style.height = (5 + Math.random() * 10) + 'px';
    confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
    confetti.style.animationDuration = (2 + Math.random() * 3) + 's';
    document.body.appendChild(confetti);
    setTimeout(() => confetti.remove(), 5000);
  }

  // ===== BALLOONS =====
  function startBalloons() {
    for (let i = 0; i < 10; i++) {
      setTimeout(() => createBalloon(), i * 800);
    }
    setInterval(() => createBalloon(), 4000);
  }

  function createBalloon() {
    const balloon = document.createElement('div');
    balloon.className = 'balloon';
    balloon.textContent = BALLOONS[Math.floor(Math.random() * BALLOONS.length)];
    balloon.style.left = Math.random() * 90 + 5 + 'vw';
    balloon.style.animationDuration = (8 + Math.random() * 6) + 's';
    balloon.style.filter = `drop-shadow(0 10px 20px rgba(0,0,0,0.3)) hue-rotate(${Math.random() * 360}deg)`;
    balloon.onclick = () => popBalloon(balloon);
    document.body.appendChild(balloon);
    setTimeout(() => balloon.remove(), 15000);
  }

  function popBalloon(balloon) {
    balloon.classList.add('popped');
    createConfettiBurst(balloon.getBoundingClientRect());
    setTimeout(() => balloon.remove(), 300);
  }

  function createConfettiBurst(rect) {
    for (let i = 0; i < 20; i++) {
      const confetti = document.createElement('div');
      confetti.className = 'confetti';
      confetti.style.left = rect.left + rect.width / 2 + 'px';
      confetti.style.top = rect.top + 'px';
      confetti.style.background = CONFETTI_COLORS[Math.floor(Math.random() * CONFETTI_COLORS.length)];
      confetti.style.width = '8px';
      confetti.style.height = '8px';
      confetti.style.animationDuration = '1s';
      document.body.appendChild(confetti);
      setTimeout(() => confetti.remove(), 1000);
    }
  }

  // ===== FIREWORKS =====
  function launchFireworks() {
    for (let i = 0; i < 5; i++) {
      setTimeout(() => createFirework(), i * 500);
    }
  }

  function createFirework() {
    const x = Math.random() * window.innerWidth;
    const y = Math.random() * (window.innerHeight / 2);
    const color = CONFETTI_COLORS[Math.floor(Math.random() * CONFETTI_COLORS.length)];
    
    for (let i = 0; i < 30; i++) {
      const particle = document.createElement('div');
      particle.className = 'firework';
      particle.style.left = x + 'px';
      particle.style.top = y + 'px';
      particle.style.background = color;
      particle.style.boxShadow = `0 0 10px ${color}, 0 0 20px ${color}`;
      
      const angle = (i / 30) * Math.PI * 2;
      const velocity = 50 + Math.random() * 50;
      const dx = Math.cos(angle) * velocity;
      const dy = Math.sin(angle) * velocity;
      
      particle.animate([
        { transform: 'translate(0, 0) scale(1)', opacity: 1 },
        { transform: `translate(${dx}px, ${dy}px) scale(0)`, opacity: 0 }
      ], {
        duration: 1000,
        easing: 'ease-out'
      });
      
      document.body.appendChild(particle);
      setTimeout(() => particle.remove(), 1000);
    }
  }

  // ===== BLOW CANDLES =====
  function blowCandles() {
    if (candlesBlown) return;
    candlesBlown = true;

    const flames = document.querySelectorAll('.flame');
    const glows = document.querySelectorAll('.flame-glow');
    const instruction = document.getElementById('blowInstruction');
    const wishContainer = document.getElementById('wishContainer');

    flames.forEach((flame, i) => {
      setTimeout(() => {
        flame.classList.add('blown');
      }, i * 200);
    });

    glows.forEach((glow, i) => {
      setTimeout(() => {
        glow.classList.add('blown');
      }, i * 200);
    });

    instruction.classList.add('hidden');
    
    setTimeout(() => {
      wishContainer.classList.add('visible');
      launchFireworks();
      launchConfetti();
    }, 800);
  }

  // ===== MESSAGE MODAL =====
  function openMessage() {
    const modal = document.getElementById('modalOverlay');
    modal.classList.add('visible');
    typeMessage();
  }

  function closeMessage(event) {
    if (event.target.classList.contains('modal-overlay') || event.target.classList.contains('modal-close')) {
      document.getElementById('modalOverlay').classList.remove('visible');
    }
  }

  function typeMessage() {
    const textEl = document.getElementById('typewriterText');
    textEl.innerHTML = '';
    let i = 0;
    
    function type() {
      if (i < MESSAGE.length) {
        if (MESSAGE[i] === '\n') {
          textEl.innerHTML += '<br>';
        } else {
          textEl.innerHTML += MESSAGE[i];
        }
        i++;
        setTimeout(type, 30);
      }
    }
    type();
  }

  // ===== MUSIC =====
  function toggleMusic() {
    const music = document.getElementById('bgMusic');
    const icon = document.getElementById('musicIcon');
    const toggle = document.getElementById('musicToggle');

    if (musicPlaying) {
      music.pause();
      icon.textContent = 'üîá';
      toggle.classList.remove('playing');
    } else {
      music.play().catch(() => {});
      icon.textContent = 'üéµ';
      toggle.classList.add('playing');
    }
    musicPlaying = !musicPlaying;
  }
</script>

</body>
</html>